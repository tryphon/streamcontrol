<p>
  <%= form.label :name, Stream.human_attribute_name("name") %><br/>
  <%= form.text_field :name %>
</p>

<h3><%= t(".server_attributes") %></h3>

<p>
  <%= form.label :server_type, Stream.human_attribute_name("server_type") %><br/>
  <%= form.select :server_type, options_for_select([:icecast2, :shoutcast], @stream.server_type) %>
</p>

<p>
  <%= form.label :server, Stream.human_attribute_name("server") %><br/>
  <%= form.text_field :server %>
</p>

<p>
  <%= form.label :port, Stream.human_attribute_name("port") %><br/>
  <%= form.text_field :port %>
</p>

<p>
  <%= form.label :mount_point, Stream.human_attribute_name("mount_point") %><br/>
  <%= form.text_field :mount_point %>
</p>

<p>
  <%= form.label :password, Stream.human_attribute_name("password") %><br/>
  <%= form.text_field :password %>
</p>

<h3><%= t(".format_attributes") %></h3>

<p>
  <%= form.label :format, Stream.human_attribute_name("format") %><br/>
  <%= format_radio_buttons form %>
</p>

<p>
  <%= form.label :mode, Stream.human_attribute_name("mode") %><br/>
  <%= mode_radio_buttons form %>
</p>

<p>
  <%= form.label :quality, Stream.human_attribute_name("quality") %><br/>
  <%= form.collection_select :quality, 0..10, :to_i, :to_s %>
</p>

<p>
  <%= form.label :bitrate, Stream.human_attribute_name("bitrate") %><br/>
  <%= form.collection_select :bitrate, @stream.allowed_bitrates, :to_i, :to_s %> kbs
</p>

<h3><%= t(".description_attributes") %></h3>

<p>
  <%= form.label :description, Stream.human_attribute_name("description") %><br/>
  <%= form.text_field :description %>
</p>

<p>
  <%= form.label :genre, Stream.human_attribute_name("genre") %><br/>
  <%= form.text_field :genre %>
</p>

<p>
  <%= form.label :related_url, Stream.human_attribute_name("related_url") %><br/>
  <%= form.text_field :related_url, :size => 50 %>
</p>

<script type="text/javascript">
var bitrates = <%= Stream.allowed_bitrates.to_json %>

function replace_bitrate_select(format)
{
  bitrate_select = document.getElementById("stream_bitrate");
  current_value = bitrate_select.value;
  options = bitrate_select.childNodes
  bitrate_select.options.length=0;
  bitrates[format].each(function(rate){
    rate_opt = document.createElement('option');
    rate_opt.text = rate;
    rate_opt.value = rate;
    bitrate_select.appendChild(rate_opt);
  });
  // restore previous value if possible
  bitrate_select.value = current_value;
}
</script>
